# https://github.com/scipy/scipy/issues/16536 - meson breaks when CXX="g++ -std=gnu++11"
export CXX=$(echo "$CXX" | sed 's/-std=[a-z0-9+]*//g')

cd src/

# Install: "pip wheel" fails for this package with
#   AttributeError: module 'mesonpy' has no attribute 'prepare_metadata_for_build_wheel'.
# We can use "build" instead.
# (However, according to https://github.com/FFY00/meson-python/issues/55 this is just a
#  consequence of an earlier error.)
python3 -m build --wheel --no-isolation .
sdh_store_and_pip_install_wheel .

#sdh_pip_install --no-build-isolation .
